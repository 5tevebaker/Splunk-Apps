

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Upgrade &mdash; Palo Alto Networks App for Splunk v5.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Palo Alto Networks App for Splunk v5.0.0 documentation" href="index.html"/>
        <link rel="next" title="Advanced Features" href="advanced.html"/>
        <link rel="prev" title="Getting Started" href="getting_started.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Palo Alto Networks App for Splunk
          

          
          </a>

          
            
            
              <div class="version">
                v5.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Upgrade</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#upgrade-to-app-version-5-0">Upgrade to App Version 5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#add-on-ta">Add-on (TA)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index">Index</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lookups">Lookups</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sourcetype">Sourcetype</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#upgrade-to-app-version-4-1">Upgrade to App Version 4.1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="userid.html">User-ID with Splunk</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Searchbar Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="universal_forwarder.html">Syslog-ng and Universal Forwarder</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshoot.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Get Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Palo Alto Networks App for Splunk</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Upgrade</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/upgrade.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="upgrade">
<span id="id1"></span><h1>Upgrade<a class="headerlink" href="#upgrade" title="Permalink to this headline">¶</a></h1>
<p>Most upgrades don&#8217;t require any special action. Just upgrade like any other
Splunk app. For the versions below, there are some considerations or
actions needed to migrate to the new version.</p>
<div class="section" id="upgrade-to-app-version-5-0">
<h2>Upgrade to App Version 5.0<a class="headerlink" href="#upgrade-to-app-version-5-0" title="Permalink to this headline">¶</a></h2>
<p>This applies if upgrading from a pre-5.0 version of this app to 5.0.0 or higher.</p>
<div class="section" id="add-on-ta">
<h3>Add-on (TA)<a class="headerlink" href="#add-on-ta" title="Permalink to this headline">¶</a></h3>
<p>Starting with App v5.0.0, the App now requires the <a class="reference external" href="https://splunkbase.splunk.com/app/2757">Palo Alto Networks Add-on
for Splunk</a>. The required version of the TA is always listed in the
<a class="reference external" href="https://github.com/PaloAltoNetworks-BD/SplunkforPaloAltoNetworks/blob/master/README.md">README.md</a> file in the Palo Alto Networks App, and in the <a class="reference internal" href="release_notes.html#releasenotes"><span class="std std-ref">Release Notes</span></a>,
and this Add-on is always included in the App.</p>
<p>You do not need to install the Add-on (TA) separately. It is installed or
upgraded automatically when the Palo Alto Networks App v5.0.0 or higher is
installed.</p>
<p><strong>ACTION REQUIRED</strong>: You must remove the deprecated TA, called <cite>TA_paloalto</cite>.
This usually applies if you use Splunk Enterprise Security version 3.x because
it comes with <cite>TA_paloalto</cite>. Recreate any inputs from the old TA in the new TA
using the instructions in the <a class="reference internal" href="getting_started.html#gettingstarted"><span class="std std-ref">Getting Started</span></a> guide. Check the <strong>apps</strong>
directory in Splunk and take the necessary action according to the table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Existing TA</th>
<th class="head">Action Needed</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TA_paloalto</td>
<td>Delete this TA directory, recreate data inputs in new TA</td>
</tr>
<tr class="row-odd"><td>Splunk_TA_paloalto</td>
<td>No action required, TA is upgraded automatically by App</td>
</tr>
<tr class="row-even"><td>No TA installed</td>
<td>No action required, TA is installed automatically by App</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="index">
<h3>Index<a class="headerlink" href="#index" title="Permalink to this headline">¶</a></h3>
<p>The new App 5.0 and Add-on 3.5 do not use the <code class="docutils literal"><span class="pre">pan_logs</span></code> index that previous
versions used. Now, logs can be stored in any index. Since the App no longer
specifies the pan_logs index, if you are upgrading, you will need to specify
the index yourself.</p>
<p><strong>ACTION REQUIRED</strong>: Create a new index called <code class="docutils literal"><span class="pre">pan_logs</span></code> using the
Splunk GUI or on the command line. Also, in your Splunk role settings, add the
<code class="docutils literal"><span class="pre">pan_logs</span></code> index to the list of <strong>Indexes searched by default</strong>.</p>
<p>Splunk will not overwrite the data previously indexed, and you will have
access to all the data indexed before the upgrade. Logs will continue to be
stored in the <code class="docutils literal"><span class="pre">pan_logs</span></code> index according to the data inputs from the
previous App version, unless otherwise specified.  The data input can
optionally be changed to store logs in a different index.</p>
<p>Results still might not show up during a search. This is because the
<code class="docutils literal"><span class="pre">pan_logs</span></code> index is not searched by default. To add the <code class="docutils literal"><span class="pre">pan_logs</span></code> index
to the list of indexes searched by default, in your Splunk settings, navigate
to <strong>Access controls</strong> -&gt; <strong>Roles</strong> -&gt; <strong>&lt;your role&gt;</strong>. Scroll down to the
section <strong>Indexes searched by default</strong>. Move <code class="docutils literal"><span class="pre">pan_logs</span></code> (or
<code class="docutils literal"><span class="pre">All</span> <span class="pre">non-internal</span> <span class="pre">indexes</span></code>) to the right column.</p>
</div>
<div class="section" id="lookups">
<h3>Lookups<a class="headerlink" href="#lookups" title="Permalink to this headline">¶</a></h3>
<p>The lookups have been moved to the Add-on (TA). However, Splunk Enterprise
does not remove lookup tables during the upgrade process. So you must remove
the lookup tables from the App after the upgrade, or you will see errors
while searching within the App.</p>
<p><strong>ACTION REQUIRED</strong>: Delete any lookups in the App that you did not create.
If you did not create any lookups in the App directory, then you can safely
delete the entire lookup directory from the App. The path to the lookup
directory is <code class="docutils literal"><span class="pre">$SPLUNK_HOME/etc/apps/SplunkforPaloAltoNetworks/lookups</span></code></p>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>rm -rf $SPLUNK_HOME/etc/apps/SplunkforPaloAltoNetworks/lookups
</pre></div>
</div>
</div>
<div class="section" id="sourcetype">
<h3>Sourcetype<a class="headerlink" href="#sourcetype" title="Permalink to this headline">¶</a></h3>
<p>The sourcetype format has changed:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Old sourcetype</th>
<th class="head">New sourcetype</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>pan_log</td>
<td>pan:log</td>
</tr>
<tr class="row-odd"><td>pan_traffic</td>
<td>pan:traffic</td>
</tr>
<tr class="row-even"><td>pan_threat</td>
<td>pan:threat</td>
</tr>
<tr class="row-odd"><td>pan_config</td>
<td>pan:config</td>
</tr>
<tr class="row-even"><td>pan_system</td>
<td>pan:system</td>
</tr>
</tbody>
</table>
<p>No action is required. The old sourcetypes will be interpreted as the new
sourcetype automatically. Optionally the data input can be changed to store
logs with the sourcetype <code class="docutils literal"><span class="pre">pan:log</span></code> instead of <code class="docutils literal"><span class="pre">pan_log</span></code>. This is more
correct, but will not change the way logs are retrieved from the index.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The data input should only specify pan:log or pan_log for the
sourcetype. The logs are automatically parsed into the other sourcetypes
(pan_traffic, pan_threat, etc) by the Add-on, so they should not be
referenced in the data input.</p>
</div>
</div>
</div>
<div class="section" id="upgrade-to-app-version-4-1">
<h2>Upgrade to App Version 4.1<a class="headerlink" href="#upgrade-to-app-version-4-1" title="Permalink to this headline">¶</a></h2>
<p>This applies if upgrading from a pre-4.1 version of this app to 4.1.0 or higher.</p>
<p>Starting in version 4.1 of this app, all of the dashboards use the Splunk 6
Datamodel feature, which allows for pivot of Palo Alto Networks data and
better control and acceleration of summary indexes used by the dashboards.
This replaces the TSIDX feature from Splunk 5.</p>
<p>After upgrade to 4.1 or higher, you may delete the TSIDX files that were
generated by the previous version of the app.  To delete the TSIDX files,
look under <code class="docutils literal"><span class="pre">$SPLUNK_HOME$/var/lib/splunk/tsidxstats/</span></code> and remove any
directories that start with <code class="docutils literal"><span class="pre">pan_</span></code>.  There could be up to 10 directories.</p>
<p>Splunk will backfill the datamodel with historic data up to 1 year old.  It
may take some time for historic data to show up in the dashboards, but it
will be available in the pivot interface and search immediately.  The time
range for historic data to be available in the dashboards can be adjusted
in the datamodel accelerations settings.</p>
<p>If you have customized the built-in dashboards of a previous app version,
then they will no longer work because the customized dashboards will still
use TSIDX.  Remove your custom dashboards from the <code class="docutils literal"><span class="pre">local</span></code> directory of the
app to use the new datamodel-based dashboards.  You can add your
customizations to the new dashboards.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="advanced.html" class="btn btn-neutral float-right" title="Advanced Features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2016, Palo Alto Networks, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v5.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>