

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User-ID with Splunk &mdash; Palo Alto Networks App for Splunk v5.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Palo Alto Networks App for Splunk v5.0.0 documentation" href="index.html"/>
        <link rel="next" title="Searchbar Commands" href="commands.html"/>
        <link rel="prev" title="Advanced Features" href="advanced.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Palo Alto Networks App for Splunk
          

          
          </a>

          
            
            
              <div class="version">
                v5.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">User-ID with Splunk</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#method-1-splunk-forwarding">Method 1: Splunk Forwarding</a></li>
<li class="toctree-l2"><a class="reference internal" href="#method-2-searchbar-command">Method 2: Searchbar Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#distribute-user-id">Distribute User-ID</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Searchbar Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="universal_forwarder.html">Syslog-ng and Universal Forwarder</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshoot.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="trial_demo.html">Trail and Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Get Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Palo Alto Networks App for Splunk</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>User-ID with Splunk</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/userid.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-id-with-splunk">
<span id="userid"></span><h1>User-ID with Splunk<a class="headerlink" href="#user-id-with-splunk" title="Permalink to this headline">¶</a></h1>
<p>The Palo Alto Networks firewall will inform Splunk of the user generating
each connection or event via the syslogs it sends to Splunk.  This assumes
that the firewall is getting the login information from AD or some other
authentication system, to know what user is logged into the device
generating the traffic.</p>
<p>Often a system like a RADIUS server sends authentication logs to Splunk to
be indexed. When these logs arrive at Splunk, Splunk can synchronize with
the firewall the knowledge of where users logged in. This keeps the
firewall&#8217;s User-ID up to date for policy enforcement and monitoring. There are
two ways to synchronize user-id information to the firewall, depending on
how your authentication logs are formatted in Splunk.</p>
<div class="section" id="method-1-splunk-forwarding">
<h2>Method 1: Splunk Forwarding<a class="headerlink" href="#method-1-splunk-forwarding" title="Permalink to this headline">¶</a></h2>
<p>This is the <strong>recommended</strong> method.</p>
<p>When Splunk receives authentication logs from an external system (like
a RADIUS server), forward the authentication logs from Splunk to a User-ID
Agent or User-ID Firewall. The logs must contain both the user and the IP
address where they logged in/out.</p>
<p>This method is recommended because it is more efficient.</p>
<p><strong>Step 1: Configure log forwarding on Splunk</strong>
<a class="reference external" href="http://docs.splunk.com/Documentation/Splunk/6.3.0/Forwarding/Forwarddatatothird-partysystemsd">http://docs.splunk.com/Documentation/Splunk/6.3.0/Forwarding/Forwarddatatothird-partysystemsd</a></p>
<p><strong>Step 2: Configure syslog receiving on User-ID firewall/agent</strong>
<a class="reference external" href="https://www.paloaltonetworks.com/documentation/70/pan-os/pan-os/user-id/configure-user-id-to-receive-user-mappings-from-a-syslog-sender.html">https://www.paloaltonetworks.com/documentation/70/pan-os/pan-os/user-id/configure-user-id-to-receive-user-mappings-from-a-syslog-sender.html</a></p>
</div>
<div class="section" id="method-2-searchbar-command">
<h2>Method 2: Searchbar Command<a class="headerlink" href="#method-2-searchbar-command" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal"><span class="pre">panuserupdate</span></code> command that is included with the app.</p>
<p>For this method, the logs are not required to contain both the user and ip
in the same log. For example, where there is an authentication log with user
and MAC address, and a DHCP log with MAC address and IP address.  Splunk
can do a search correlating the user to the IP using the MAC as the common
value, then pass the search results to the <code class="docutils literal"><span class="pre">panuserupdate</span></code> command which
will update the mapping on the firewall.</p>
<p>See <a class="reference internal" href="commands.html#panuserupdate"><span class="std std-ref">panuserupdate</span></a> in the Searchbar Command documentation.</p>
</div>
<div class="section" id="distribute-user-id">
<h2>Distribute User-ID<a class="headerlink" href="#distribute-user-id" title="Permalink to this headline">¶</a></h2>
<p>To simplify administration, you can configure one firewall to be the
redistribution firewall that collects all the mapping information and
shares it with other firewalls. You configure the receiving firewalls to
retrieve the mapping information from the redistribution firewall.</p>
<img alt="_images/userid_distribution.png" src="_images/userid_distribution.png" />
<p><strong>Configure a Firewall to Share User Mapping Data with Other Firewalls</strong>
<a class="reference external" href="https://www.paloaltonetworks.com/documentation/70/pan-os/pan-os/user-id/configure-a-firewall-to-share-user-mapping-data-with-other-firewalls.html">https://www.paloaltonetworks.com/documentation/70/pan-os/pan-os/user-id/configure-a-firewall-to-share-user-mapping-data-with-other-firewalls.html</a></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="commands.html" class="btn btn-neutral float-right" title="Searchbar Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="advanced.html" class="btn btn-neutral" title="Advanced Features" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2016, Palo Alto Networks, Inc..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v5.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>